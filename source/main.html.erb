<%
  # used for carousel at the bottom of the index page ------
  videos = []
  episodes.each_with_index do |episode, index|
    videos << {:image => episode.detect{|row| row.kind == "video"}.fetch("image"),
               :text =>  episode.detect{|row| row.kind == "text"}.fetch("title"),
               :slug => "episode-#{index}"}
  end
  # --------------------------------------------------------
%>

<% episodes.each_with_index do |episode, index| %>
  <% slug = slugs.at(index) %>
  <%= partial "partials/episode_template", :locals => {:doc => episode,
                                                       :active_slug => active_slug,
                                                       :slug => slug,
                                                       :index => index,
                                                       :published_videos => videos
                                                       } %>
<% end %>
