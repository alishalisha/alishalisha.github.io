@mixin center {
  // Horizontally center things.
  text-align: center;
  margin: auto;

  // Vertically center anything, literally anything.
  // http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/
  position: relative;
  top: 50%;
  // IE9+ ...
  @include transform(translateY(-50%));

  // Make sure margins of nested elements arenâ€™t messing with spacing
  :first-child {
    margin-top: 0;
  }
  :last-child {
    margin-bottom: 0;
  }
}

@mixin play-overlay($size) {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  svg {
    color: inherit;
    width: $size;
    height: $size;
    position: absolute;
    margin: auto;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
  }
}



$full-bleed-margin: -5.56%;
$figure-break: 50em;

figure {
  display: table;
  width: 100%;
  position: relative;
  p {
    font-family: $paragraph-font;
    font-size: 1.05em;
    color: $text;
  }
  .action {
    font-size: 1.2em;
  }
  @if $play-icon-links != true {
    .inline-icon {
      display: none;
    }
  }
  .figure-content {
    h3 {
      font-size: 2em;
    }
  }
}

figure.overlay {
  .figure-content {
    @media (min-width: $figure-break) {
      position: absolute;
      bottom: 10%;
      padding: 5%;
    }
  }
  @media (max-width: $break_small) {
    img {
      margin-bottom: 1em;
    }
  }
}

.intro {
  padding: 5% 0 3.3% 0;
}

// "Overlay" styling
figure.overlay .action:after {
  background: image-url($sponsor-logo) center no-repeat;
  background-size: contain;
}

@media (min-width: 50em) {
  figure.overlay {
    &:before {
      background: none;
    }
    h3, .action {
      color: $background;
    }
    p {
      color: white;
    }
    .figure-content {
      width: 50%;
      background-color: $primary;
      padding: 2% 5% 4% 5%;
      margin: 0 0 3em 0;
    }
  }
}

// left and right kinds
figure.left {
  img,
  .figure-content {
    display: inline-block;
    width: 50%;
    position: relative;
    vertical-align: top;
  }
  .figure-content {
    padding-left: 2em;
  }
}

figure.right {
  img,
  .figure-content {
    display: inline-block;
    width: 50%;
    position: relative;
    vertical-align: top;
  }
  img {
    float: right;
  }
  .figure-content {
    padding-right: 2em;
  }
}

.left_quote {
  @extend figure.next_click;
  img {
    float: left;
  }
  .figure-content {
    float: right;
  }
}

.right_quote {
  @extend figure.next_click;
  img {
    float: right;
  }
  .figure-content {
    float: left;
  }
}

.left_quote, .right_quote {
  h2 {
    color: $primary;
    font-size: 1.2em;
    padding: 1em 0;
  }
}

figure.overlay {
  @media (min-width: $figure-break) {
    &:before {
      content: "";
      display: block;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #333;
      background-color: rgba(#333, .5);
    }
  }
}

figure.image, figure.next {
  margin-left: $full-bleed-margin;
  margin-right: $full-bleed-margin;
  width: 100% - $full-bleed-margin * 2;
  &:last-child {
    margin-bottom: 0;
  }
}

figure.next_click {
  background-color: #fff;
  margin: 0 auto;
  max-width: 70em;
  img {
    width: 50%;
    float: left;
    margin: 0;
  }
  .figure-content {
    float: left;
    max-width: 44%;
    padding: 0;
    position: static;
    padding: 0 3%;
    h3 {
      margin-top: 0;
    }
  }
}

// Impression trackers should have no spacing
figure.impression {
  margin: 0;
}

// Pull quotes styling
// h2 is the quote
.right_quote {
  p { float: left; }
  h2 {
    float: right;
  }
}

.left_quote {
  p { float: right; }
  h2 { 
    float: left;
  }
}

.right_quote, .left_quote {
  margin: 2.5em 0;
  @media (max-width: $break_small) {
    margin: 0 0 1em 0;
    padding: 0 !important;
  }

  &:before, &:after {
    content: " ";
    display: table;
  }
  &:after {
    clear: both;
  }

  p {
    font-family: $text-font;
    color: $text;
    width: 47%;
    margin: 0;
    @media (max-width: 30em) {
      display: block;
      width: 100%;
      margin-top: 1em;
    }
  }

  h2 {
    font-family: $headline-font;
    color: $primary;
    font-size: $font-size * 1.5;
    line-height: $line-height;
    width: 47%;
    padding: 0;
    @media (max-width: 30em) {
      font-size: $font-size;
      display: block;
      width: 100%;
    }
  }
}

@media (max-width: $break_medium) {
  figure.right,
  figure.left {
    img, .figure-content {
      display: block;
      width: 100%;
      padding: 0;
    }
    img {
      margin-bottom: 1em;
    }
  }
}